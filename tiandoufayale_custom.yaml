# tiandoufayale's Clash Configuration Template
# Use this link in your Subconverter 'Remote Config'

# é”šç‚¹åŒº (ç”¨äºå¿«é€Ÿå¼•ç”¨ç»„é…ç½®)
Proxy_first: &Proxy_first {type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ¯ å…¨çƒç›´è¿]}
Direct_first: &Direct_first {type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©]}
Include_all: &Include_all {type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ¯ å…¨çƒç›´è¿], include-all: true, exclude-filter: "(?i)(DIRECT|ç›´è¿)"}
Urltest_Base: &Urltest_Base {
  type: url-test, 
  include-all: true, 
  url: "https://www.gstatic.com/generate_204", 
  interval: 300, 
  tolerance: 50, 
  max-failed-times: 1, 
  hidden: true
}
# å¤–éƒ¨æœºåœºé€šç”¨é…ç½®é”šç‚¹ 
PProviders: &PProviders {type: http, interval: 86400, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}, filter: '^(?!.*(æ‹’ç» | ç›´è¿ | ç¾¤ | é‚€è¯· | è¿”åˆ© | å¾ªç¯ | å®˜ç½‘ | å®¢æœ | ç½‘ç«™ | ç½‘å€ | è·å– | è®¢é˜… | æµé‡ | åˆ°æœŸ | æœºåœº | ä¸‹æ¬¡ | ç‰ˆæœ¬ | å®˜å€ | å¤‡ç”¨ | è¿‡æœŸ | å·²ç”¨ | è”ç³» | é‚®ç®± | å·¥å• | è´©å– | é€šçŸ¥ | å€’å– | é˜²æ­¢ | å›½å†… | åœ°å€ | é¢‘é“ | æ— æ³• | è¯´æ˜ | æç¤º | ç‰¹åˆ« | è®¿é—® | æ”¯æŒ | æ•™ç¨‹ | å…³æ³¨ | æ›´æ–° | ä½œè€… | åŠ å…¥ |USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|traffic))'}

proxy-providers:
  Airport_01:
    <<: *PProviders
    proxy: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    override:
      additional-prefix: '[æœºåœº 1]'
      skip-cert-verify: true

# å…¨å±€é…ç½®
mixed-port: 7890
ipv6: false                          # âœ… å…³é—­ä»¥é˜²æ³„æ¼
allow-lan: true
unified-delay: true
geodata-mode: true                   # âœ… åŒ¹é… .metadb æ ¼å¼
tcp-concurrent: true
find-process-mode: strict
profile:
  store-selected: true
  store-fake-ip: true                
tun:
  enable: true
  stack: system      # æˆ– gvisor/mixedï¼Œæ ¹æ®å†…æ ¸æ”¯æŒé€‰æ‹©
  auto-route: true   # è‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿè·¯ç”±
  auto-detect-interface: true
  dns-hijack:
    - any:53         # åŠ«æŒæ‰€æœ‰ DNS è¯·æ±‚ï¼Œå¼ºåˆ¶èµ° Clash
  strict-route: true # ğŸ”’ ä¸¥æ ¼æ¨¡å¼ï¼šéä»£ç†æµé‡ç›´æ¥ä¸¢å¼ƒï¼ˆé«˜çº§é˜²æ³„æ¼ï¼‰

dns:
  enable: true
  listen: 127.0.0.1:1053  
  ipv6: false             
  enhanced-mode: fake-ip  
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - rule-set:fakeip_filter_domain
    - rule-set:private_domain
    - rule-set:cn_domain
    - +.lan
    - +.local
    - +.arpa
    - geosite:private      # å±€åŸŸç½‘åŸŸåä¸èµ° FakeIP
    - geosite:category-education-cn # æ•™è‚²ç½‘åŸŸåä¸èµ° FakeIP
    - +.market.xiaomi.com  # å°ç±³å¸‚åœºéœ€è¦çœŸå® IP
  
  # ã€ä¼˜åŒ– 2ã€‘é»˜è®¤ DNS ç”¨äºè§£æä»£ç†èŠ‚ç‚¹åŸŸåå’Œå›½å†…åŸŸå
  default-nameserver:
    - https://223.5.5.5/dns-query
    
  # ä»£ç†æœåŠ¡å™¨åŸŸåçš„è§£æï¼Œå¿…é¡»èµ°å›½å†… DNS ç¡®ä¿èƒ½è¿ä¸ŠèŠ‚ç‚¹
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query

  # ã€ä¼˜åŒ– 3ã€‘é€šç”¨ DNSï¼Œå›½å†…æµé‡èµ°è¿™é‡Œ
  nameserver:
    - https://223.5.5.5/dns-query
    - https://cloudflare-dns.com/dns-query

  # ã€ä¼˜åŒ– 4ã€‘å…³é”®ï¼šéå›½å†…æµé‡å¼ºåˆ¶èµ°å›½å¤– DNSï¼Œä¸”æŸ¥è¯¢è¯·æ±‚æœ¬èº«èµ°ä»£ç† (#PROXY)
  # è¿™è§£å†³äº†â€œç›®æ ‡ç½‘ç«™æ ¹æ® DNS åˆ¤æ–­åœ°ç†ä½ç½®â€çš„é—®é¢˜
  nameserver-policy:
    "geosite:geolocation-!cn": 
      - "https://8.8.8.8/dns-query"
      - "https://1.1.1.1/dns-query"

  # ã€ä¼˜åŒ– 5ã€‘å¤‡ç”¨ DNSï¼Œé˜²æ­¢ä¸» DNS æŒ‚æ‰ï¼Œä½†å¿…é¡»è¿‡æ»¤æ‰å›½å†… IP é¿å…æ±¡æŸ“
  fallback:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
    domain:
      - +.google.com
      - +.facebook.com
      - +.youtube.com
  respect-rules: true # ã€æ ¸å¿ƒã€‘å¿…é¡»ä¸º trueï¼Œç¡®ä¿ DNS è¯·æ±‚æœ¬èº«ä¹Ÿèµ°ä»£ç†è§„åˆ™ï¼Œé˜²æ­¢è¿è¥å•†çœ‹åˆ°ä½ åœ¨æŸ¥ä»€ä¹ˆ
# ç­–ç•¥ç»„
proxy-groups:
  - {name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select,no-resolve: true,proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ¯ å…¨çƒç›´è¿], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/select.png"}
  - {name: STEAM,type: select, <<: *Include_all, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/steam.png"}
  - {name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/telegram.png"}
  - {name: ğŸ¦ æ¨ç‰¹åˆ†æµ, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/twitter.png"}
  - {name: ğŸ’¬ Aiå¹³å°, type: select, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/ai.png"}
  - {name: ğŸ“¹ æ²¹ç®¡è§†é¢‘, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/youtube.png"}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, â™»ï¸ è‡ªåŠ¨é€‰æ‹©], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/direct.png"}
  - {name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT, DIRECT], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/block.png"}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/final.png"}
  - {name: â˜ï¸ CloudFlareCDN, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ¯ å…¨çƒç›´è¿, ğŸŸ æ¼ç½‘ä¹‹é±¼]}
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, type: select, include-all: true}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, interval: 300, tolerance: 50}
  - {name: ğŸ”¯ æ•…éšœè½¬ç§», type: fallback, include-all: true, interval: 300}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(æ¸¯|HK|hk|Hong Kong|ğŸ‡­ğŸ‡°)", icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/Hongkong.png"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(æ–°|ğŸ‡¸ğŸ‡¬|SG|Singapore)", icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/Singapore.png"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|Japan)", icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/Japan.png"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(å°|ğŸ‡¹ğŸ‡¼|TW|Taiwan)", icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/Taiwan_China.png"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(ç¾|ğŸ‡ºğŸ‡²|ğŸ‡ºğŸ‡¸|US|America|United States)", icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/America.png"}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(KR|Korea|KOR|é¦–å°”|éŸ©)"}
  - {name: ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(é©¬æ¥|æ³°å›½|è²å¾‹å®¾|å°åº¦å°¼è¥¿äºš|VN)"}
  - {name: ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, <<: *Urltest_Base, include-all: true, filter: "(?i)(è‹±å›½|å¾·å›½|å¢æ£®å ¡|æ³•å›½|ä¿„ç½—æ–¯|France|Deutschland|United Kingdom|Italy|Netherland)"}
rules:
  # ğŸ”´ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,banAd_domain,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,banAd2_domain,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  
  # ğŸŸ¡ åŸŸåè§„åˆ™
  - RULE-SET,private_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,speedtest_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Cloudflare_domain,â˜ï¸ CloudFlareCDN
  - RULE-SET,proxy_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai_domain,ğŸ’¬ Aiå¹³å°
  - RULE-SET,ai_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,youtube_domain,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,github_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,gfw_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,games_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steamcdn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,microsoft_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steam_domain,STEAM
  - RULE-SET,tld_proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # ğŸŸ¢ IP è§„åˆ™ï¼ˆå…¨éƒ¨åŠ  no-resolveï¼‰
  - RULE-SET,telegram_ip,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  - RULE-SET,twitter_ip,ğŸ¦ æ¨ç‰¹åˆ†æµ,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,private_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,steamcdn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  
  # ğŸ”µ å…œåº•
  - GEOSITE,category-games@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,private,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-communication,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-social-media-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-ai-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,github,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,steam,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,google-cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,CN,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOIP,private,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOIP,telegram,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,twitter,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†å®šä¹‰ (å¼•ç”¨ lanlan123.yaml æ¥æº)
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}

rule-providers:
  banAd_domain: { <<: *domain, url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.mrs" }
  banAd2_domain: { <<: *domain, url: "https://raw.githubusercontent.com/privacy-protection-tools/anti-ad.github.io/master/docs/mihomo.mrs" }
  fakeip_filter_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/fakeip-filter-lite.mrs" }
  speedtest_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs" }
  Cloudflare_domain: { <<: *ip, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cloudflare.mrs" }
  proxy_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/proxy.mrs" }
  ai_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs" }
  youtube_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/youtube.mrs" }
  github_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs" }
  cn_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/cn.mrs" }
  gfw_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/gfw.mrs" }
  telegram_ip: { <<: *ip, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/telegramip.mrs" }
  twitter_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs" }
  cn_ip: { <<: *ip, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/cnip.mrs" }
  private_ip: { <<: *ip, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/privateip.mrs" }
  games_cn_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/games-cn.mrs" }
  steamcdn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/Steam-domain.mrs" }
  steamcdn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/IP/steamCDN-ip.mrs" }
  steam_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam.mrs" }
  ai_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-ai-cn.mrs" }
  private_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/private.mrs" }
  microsoft_cn_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/microsoft-cn.mrs" }
  tld_proxy: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/tld-proxy.mrs" }




























