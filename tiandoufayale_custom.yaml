# tiandoufayale's Clash Configuration Template
# Reference: lanlan123.yaml
# Use this link in your Subconverter 'Remote Config'

# é”šç‚¹åŒº (ç”¨äºå¿«é€Ÿå¼•ç”¨ç»„é…ç½®)
Proxy_first: &Proxy_first {type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ¯ å…¨çƒç›´è¿]}
Direct_first: &Direct_first {type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©]}
Include_all: &Include_all {type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ¯ å…¨çƒç›´è¿], include-all: true, exclude-filter: "(?i)(DIRECT|ç›´è¿)"}
Urltest_Base: &Urltest_Base {type: url-test, include-all: true, tolerance: 20, interval: 300, max-failed-times: 1, hidden: true}

# å¤–éƒ¨æœºåœºé€šç”¨é…ç½®é”šç‚¹
PProviders: &PProviders {type: http, interval: 86400, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}, filter: '^(?!.*(æ‹’ç»|ç›´è¿|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|traffic))'}

# å¤–éƒ¨æœºåœºè®¢é˜…ï¼ˆSubconverter ä¼šåˆå¹¶è¿™äº›è®¢é˜…å’Œ Worker çš„èŠ‚ç‚¹ï¼‰
proxy-providers:
  Airport_01:
    <<: *PProviders
    proxy: "ğŸ”¯ æ•…éšœè½¬ç§»"
    override:
      additional-prefix: '[æœºåœº1]'
      skip-cert-verify: true
      udp: true

# å…¨å±€é…ç½®
mixed-port: 7890
ipv6: true
allow-lan: true
unified-delay: true
tcp-concurrent: true
geodata-mode: false
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.metadb"
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

external-controller: 0.0.0.0:9090
secret: ""
external-ui: ui
external-ui-url: "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"

find-process-mode: strict
profile:
  store-selected: true
  store-fake-ip: false

sniffer:
  enable: true
  sniff:
    HTTP: {ports: [80, 8080-8880], override-destination: true}
    TLS: {ports: [443, 8443]}
    QUIC: {ports: [443, 8443]}
  skip-domain:
    - "Mijia Cloud"
    - "dlg.io.mi.com"
    - "*.push.apple.com"
    - "*.wechat.com"
    - "*.qq.com"
    - "*.oray.com"
    - "*.sunlogin.net"

tun:
  enable: true
  stack: gvisor
  mtu: 9000
  auto-route: true
  auto-detect-interface: true

# DNS æ¨¡å— (æ”¯æŒ Fake-IP ä¸åˆ†æµ)
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:CN_Domain,fakeip_filter_domain,game_cn_domain,wechat_domain,ai_cn_domain,xiaomi_domain,steam_cn_domain,direct_domain,private_domain,cn_domain"
    - "*.lan"
    - "*.local"
  default-nameserver: [223.5.5.5, 119.29.29.29]
  proxy-server-nameserver: [https://doh.pub/dns-query, https://dns.alidns.com/dns-query]
  direct-nameserver: [https://doh.pub/dns-query, https://dns.alidns.com/dns-query]
  nameserver: [https://dns.google/dns-query, https://cloudflare-dns.com/dns-query]

# ç­–ç•¥ç»„
proxy-groups:
  - {name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ¯ å…¨çƒç›´è¿], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/select.png"}
  - {name: STEAM,type: select, <<: *Include_all, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/steam.png"}
  - {name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/telegram.png"}
  - {name: ğŸ¦ æ¨ç‰¹åˆ†æµ, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/twitter.png"}
  - {name: ğŸ’¬ Aiå¹³å°, <<: *Include_all, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/ai.png"}
  - {name: ğŸ“¹ æ²¹ç®¡è§†é¢‘, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/youtube.png"}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, â™»ï¸ è‡ªåŠ¨é€‰æ‹©], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/direct.png"}
  - {name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT, DIRECT], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/block.png"}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/final.png"}
  - {name: â˜ï¸ CloudFlareCDN, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ¯ å…¨çƒç›´è¿, ğŸŸ æ¼ç½‘ä¹‹é±¼]}
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, type: select, include-all: true}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, interval: 300, tolerance: 50}
  - {name: ğŸ”¯ æ•…éšœè½¬ç§», type: fallback, include-all: true, interval: 300}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(æ¸¯|HK|hk|Hong Kong|ğŸ‡­ğŸ‡°)"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(æ–°|ğŸ‡¸ğŸ‡¬|SG|Singapore)"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|Japan)"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(å°|ğŸ‡¹ğŸ‡¼|TW|Taiwan)"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(ç¾|ğŸ‡ºğŸ‡²|ğŸ‡ºğŸ‡¸|US|America|United States)"}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(KR|Korea|KOR|é¦–å°”|éŸ©)"}
  - {name: ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(é©¬æ¥|æ³°å›½|è²å¾‹å®¾|å°åº¦å°¼è¥¿äºš|VN)"}
  - {name: ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)(è‹±å›½|å¾·å›½|å¢æ£®å ¡|æ³•å›½|ä¿„ç½—æ–¯|France|Deutschland|United Kingdom|Italy|Netherland)"}

# åˆ†æµè§„åˆ™
rules:
  - RULE-SET,banAd_domain,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,wechat_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,wechat_asn,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,speedtest_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Cloudflare_domain,â˜ï¸ CloudFlareCDN
  - RULE-SET,proxy_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai!cn_domain,ğŸ’¬ Aiå¹³å°
  - RULE-SET,ai_domain,ğŸ’¬ Aiå¹³å°
  - RULE-SET,ai_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,openai_domain,ğŸ’¬ Aiå¹³å°
  - RULE-SET,youtube_domain,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,github_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,telegram_domain,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,telegram_ip,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  - RULE-SET,twitter_ip,ğŸ¦ æ¨ç‰¹åˆ†æµ,no-resolve
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,private_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,gfw_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,steam_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steamcdn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steamcdn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,direct_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steam_domain,STEAM
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†å®šä¹‰ (å¼•ç”¨ lanlan123.yaml æ¥æº)
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}

rule-providers:
  banAd_domain: { <<: *domain, url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.mrs" }
  wechat_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/WeChat.mrs" }
  fakeip_filter_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/fakeip-filter.mrs" }
  speedtest_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs" }
  Cloudflare_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/cloudflare.mrs" }
  proxy_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/proxy.mrs" }
  ai!cn_domain: { <<: *domain, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.mrs" }
  ai_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/ai.mrs" }
  openai_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/openai.mrs" }
  youtube_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs" }
  github_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs" }
  telegram_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs" }
  netflix_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs" }
  cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs" }
  gfw_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs" }
  geolocation-!cn: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs" }
  wechat_asn: { <<: *ip, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/IP/AS132203.mrs" }
  telegram_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs" }
  twitter_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs" }
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs" }
  private_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs" }
  steam_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam%40cn.mrs" }
  steamcdn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/Steam-domain.mrs" }
  steamcdn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/IP/steamCDN-ip.mrs" }
  steam_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam.mrs" }
  game_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-games%40cn.mrs" }
  ai_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-ai-cn.mrs" }
  direct_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/direct.mrs" }

