# tiandoufayale's Clash Configuration Template
# Use this link in your Subconverter 'Remote Config'

# é”šç‚¹åŒº (ç”¨äºå¿«é€Ÿå¼•ç”¨ç»„é…ç½®)
Proxy_first: &Proxy_first {type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ¯ å…¨çƒç›´è¿]}
Direct_first: &Direct_first {type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©]}
Include_all: &Include_all {type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ æ•…éšœè½¬ç§», ğŸ¯ å…¨çƒç›´è¿], include-all: true, exclude-filter: "(?i)(DIRECT|ç›´è¿)"}
Urltest_Base: &Urltest_Base {
  type: url-test, 
  include-all: true, 
  url: "https://www.gstatic.com/generate_204",  # âœ… è¡¥å……åˆ°è¿™é‡Œ
  interval: 300, 
  tolerance: 50, 
  max-failed-times: 1, 
  hidden: true
}
# å¤–éƒ¨æœºåœºé€šç”¨é…ç½®é”šç‚¹ 
PProviders: &PProviders {type: http, interval: 86400, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}, filter: '^(?!.*(æ‹’ç» | ç›´è¿ | ç¾¤ | é‚€è¯· | è¿”åˆ© | å¾ªç¯ | å®˜ç½‘ | å®¢æœ | ç½‘ç«™ | ç½‘å€ | è·å– | è®¢é˜… | æµé‡ | åˆ°æœŸ | æœºåœº | ä¸‹æ¬¡ | ç‰ˆæœ¬ | å®˜å€ | å¤‡ç”¨ | è¿‡æœŸ | å·²ç”¨ | è”ç³» | é‚®ç®± | å·¥å• | è´©å– | é€šçŸ¥ | å€’å– | é˜²æ­¢ | å›½å†… | åœ°å€ | é¢‘é“ | æ— æ³• | è¯´æ˜ | æç¤º | ç‰¹åˆ« | è®¿é—® | æ”¯æŒ | æ•™ç¨‹ | å…³æ³¨ | æ›´æ–° | ä½œè€… | åŠ å…¥ |USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|traffic))'}

proxy-providers:
  Airport_01:
    <<: *PProviders
    proxy: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    override:
      additional-prefix: '[æœºåœº 1]'
      skip-cert-verify: true

# å…¨å±€é…ç½®
mixed-port: 7890
ipv6: false                          # âœ… å…³é—­ä»¥é˜²æ³„æ¼
allow-lan: true
unified-delay: true
geodata-mode: true                   # âœ… åŒ¹é… .metadb æ ¼å¼
tcp-concurrent: true
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.metadb"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

find-process-mode: strict
profile:
  store-selected: true
  store-fake-ip: true                # âœ… æŒä¹…åŒ–

sniffer:
  enable: true
  sniff:
    HTTP: {ports: [80, 8080-8880], override-destination: true}
    TLS: {ports: [443, 8443]}
    QUIC: {ports: [443, 8443]}
  skip-domain:
    - "Mijia Cloud"
    - "dlg.io.mi.com"
    - "*.push.apple.com"
    - "*.wechat.com"
    - "*.qq.com"
    - "*.oray.com"
    - "*.sunlogin.net"
    - "+.cn"                         # âœ… è¡¥å……ï¼šå›½å†…åŸŸåé€šå¸¸ä¸éœ€è¦å—…æ¢



tun:
  enable: true
  stack: system      # æˆ– gvisor/mixedï¼Œæ ¹æ®å†…æ ¸æ”¯æŒé€‰æ‹©
  auto-route: true   # è‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿè·¯ç”±
  auto-detect-interface: true
  dns-hijack:
    - any:53         # åŠ«æŒæ‰€æœ‰ DNS è¯·æ±‚ï¼Œå¼ºåˆ¶èµ° Clash
  strict-route: true # ğŸ”’ ä¸¥æ ¼æ¨¡å¼ï¼šéä»£ç†æµé‡ç›´æ¥ä¸¢å¼ƒï¼ˆé«˜çº§é˜²æ³„æ¼ï¼‰

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:fakeip_filter_domain"
    - "rule-set:private_domain"
    - "rule-set:cn_domain"
    - "rule-set:ai_cn_domain"
    - "rule-set:games_cn_domain"
    - "rule-set:steamcdn_domain"
    - "rule-set:microsoft_cn_domain"
    - "+.cn"
    - "*.lan"
    - "*.local"
    - "+.in-addr.arpa"
  
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  
  proxy-server-nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  
  nameserver-policy:
    "geosite:geolocation-!cn":
      - https://dns.google/dns-query
      - https://cloudflare-dns.com/dns-query
  
  respect-rules: true
# ç­–ç•¥ç»„
proxy-groups:
  # ğŸš€ èŠ‚ç‚¹é€‰æ‹©ï¼ˆselect ç±»å‹ï¼Œä¸éœ€è¦ urlï¼‰
  - {name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©ï¼Œtype: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©ï¼ŒğŸ”¯ æ•…éšœè½¬ç§»ï¼ŒğŸ‡­ é¦™æ¸¯èŠ‚ç‚¹ï¼ŒğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹ï¼ŒğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ï¼ŒğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹ï¼ŒğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹ï¼ŒğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹ï¼ŒğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹ï¼ŒğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹ï¼ŒğŸš€ æ‰‹åŠ¨åˆ‡æ¢ï¼ŒğŸ¯ å…¨çƒç›´è¿], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/select.png"}
  # åŠŸèƒ½åˆ†æµç»„ï¼ˆselect ç±»å‹ï¼Œä¸éœ€è¦ urlï¼‰
  - {name: STEAM, <<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/steam.png"}
  - {name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯ï¼Œ<<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/telegram.png"}
  - {name: ğŸ¦ æ¨ç‰¹åˆ†æµï¼Œ<<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/twitter.png"}
  - {name: ğŸ’¬ Ai å¹³å°ï¼Œ<<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/ai.png"}
  - {name: ğŸ“¹ æ²¹ç®¡è§†é¢‘ï¼Œ<<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/youtube.png"}
  # åŸºç¡€æ§åˆ¶ç»„ï¼ˆselect ç±»å‹ï¼Œä¸éœ€è¦ urlï¼‰
  - {name: ğŸ¯ å…¨çƒç›´è¿ï¼Œtype: select, proxies: [DIRECT, â™»ï¸ è‡ªåŠ¨é€‰æ‹©], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/direct.png"}
  - {name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆªï¼Œtype: select, proxies: [REJECT, DIRECT], icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/block.png"}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼ï¼Œ<<: *Proxy_first, icon: "https://pub-8feead0908f649a8b94397f152fb9cba.r2.dev/final.png"}
  - {name: â˜ï¸ CloudFlareCDN, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©ï¼ŒğŸ¯ å…¨çƒç›´è¿ï¼ŒğŸŸ æ¼ç½‘ä¹‹é±¼]}
  # æ‰‹åŠ¨åˆ‡æ¢ï¼ˆselect ç±»å‹ï¼Œä¸éœ€è¦ urlï¼‰
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ï¼Œtype: select, include-all: true}
  # âœ… è‡ªåŠ¨é€‰æ‹©ï¼ˆurl-test ç±»å‹ï¼Œéœ€è¦ urlï¼‰
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©ï¼Œtype: url-test, include-all: true, url: "https://www.gstatic.com/generate_204", interval: 300, tolerance: 50}
  # âœ… æ•…éšœè½¬ç§»ï¼ˆfallback ç±»å‹ï¼Œéœ€è¦ urlï¼‰
  - {name: ğŸ”¯ æ•…éšœè½¬ç§»ï¼Œtype: fallback, include-all: true, url: "https://www.gstatic.com/generate_204", interval: 300}
  # âœ… ç®€æ´å†™æ³•ï¼šåªå†™ name + é”šç‚¹ + filter
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(æ¸¯|HK|hk|Hong Kong|ğŸ‡­)"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(æ–° |ğŸ‡¸ğŸ‡¬|SG|Singapore)"}
  - {name: ğŸ‡¯ æ—¥æœ¬èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(æ—¥æœ¬ |ğŸ‡¯ğŸ‡µ|JP|Japan)"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(å°|ğŸ‡¹ğŸ‡¼|TW|Taiwan)"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(ç¾|ğŸ‡º|ğŸ‡ºğŸ‡¸|US|America|United States)"}
  - {name: ğŸ‡° éŸ©å›½èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(KR|Korea|KOR|é¦–å°” | éŸ©)"}
  - {name: ğŸ‡²ğŸ‡¾ äºšæ´²èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(é©¬æ¥ | æ³°å›½ | è²å¾‹å®¾ | å°åº¦å°¼è¥¿äºš|VN)"}
  - {name: ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, <<: *Urltest_Base, filter: "(?i)(è‹±å›½ | å¾·å›½ | å¢æ£®å ¡ | æ³•å›½ | ä¿„ç½—æ–¯|France|Deutschland|United Kingdom|Italy|Netherland)"}
  rules:
  # ğŸ”´ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,banAd_domain,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,banAd2_domain,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  
  # ğŸŸ¡ åŸŸåè§„åˆ™
  - RULE-SET,private_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,speedtest_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Cloudflare_domain,â˜ï¸ CloudFlareCDN
  - RULE-SET,proxy_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai_domain,ğŸ’¬ Aiå¹³å°
  - RULE-SET,ai_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,youtube_domain,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,github_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,gfw_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,games_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steamcdn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,microsoft_cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steam_domain,STEAM
  - RULE-SET,tld_proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # ğŸŸ¢ IP è§„åˆ™ï¼ˆå…¨éƒ¨åŠ  no-resolveï¼‰
  - RULE-SET,telegram_ip,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  - RULE-SET,twitter_ip,ğŸ¦ æ¨ç‰¹åˆ†æµ,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,private_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,steamcdn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  
  # ğŸ”µ å…œåº•
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†å®šä¹‰ (å¼•ç”¨ lanlan123.yaml æ¥æº)
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}

rule-providers:
  banAd_domain: { <<: *domain, url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.mrs" }
  banAd2_domain: { <<: *domain, url: "https://raw.githubusercontent.com/privacy-protection-tools/anti-ad.github.io/master/docs/mihomo.mrs" }
  fakeip_filter_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/fakeip-filter-lite.mrs" }
  speedtest_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs" }
  Cloudflare_domain: { <<: *domain, url: "https://github.com/Loyalsoldier/geoip/raw/refs/heads/release/mrs/cloudflare.mrs" }
  proxy_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/proxy.mrs" }
  ai_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs" }
  youtube_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/youtube.mrs" }
  github_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs" }
  cn_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/cn.mrs" }
  gfw_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/gfw.mrs" }
  telegram_ip: { <<: *ip, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/telegramip.mrs" }
  twitter_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs" }
  cn_ip: { <<: *ip, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/cnip.mrs" }
  private_ip: { <<: *ip, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/privateip.mrs" }
  games_cn_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/games-cn.mrs" }
  steamcdn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/Steam-domain.mrs" }
  steamcdn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/IP/steamCDN-ip.mrs" }
  steam_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam.mrs" }
  ai_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-ai-cn.mrs" }
  private_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/private.mrs" }
  microsoft_cn_domain: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/microsoft-cn.mrs" }
  tld_proxy: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/tld-proxy.mrs" }

















